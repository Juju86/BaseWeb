function active_nav(t){var n=window.location.pathname,o=window.location.hash;t.find("a").each(function(){var e=$(this).attr("href");n.substring(0,e.length)===e&&$(this).closest("li").addClass("active"),o===e&&$(this).closest("li").addClass("active"),$("#nav .rootnav > li.active").find(".subnav").fadeIn(250),$("#nav .rootnav > li > a").click(function(){t.find(".subnav").fadeOut(250)}),/#/.test($(this).attr("href"))&&$(this).click(function(){t.find(".subnav li").removeClass("active"),$(this).closest("li").addClass("active")})})}function active_subpage(t){var n=window.location.hash;$(".rootpage").hide(),t.hide(),n?$(n).show():$(".rootpage").show(),$("#nav .subnav a").click(function(){var n=$(this).attr("href");$(".rootpage").fadeOut(250),t.fadeOut(250,function(){setTimeout(function(){$(n).fadeIn(250)},250)}),$("html, body").animate({scrollTop:0})})}!function(t,n,o){"use strict";if(!history.pushState)return t.fn.smoothState=function(){return this},void(t.fn.smoothState.options={});if(!t.fn.smoothState){var e=t("html, body"),i=n.console||!1,a={anchors:"a",prefetch:!1,blacklist:".no-smoothstate, [target]",development:!1,pageCacheSize:0,alterRequestUrl:function(t){return t},onStart:{duration:0,render:function(){e.scrollTop(0)}},onProgress:{duration:0,render:function(){e.css("cursor","wait"),e.find("a").css("cursor","wait")}},onEnd:{duration:0,render:function(t,n,o){e.css("cursor","auto"),e.find("a").css("cursor","auto"),n.html(o)}},callback:function(){}},s={isExternal:function(t){var o=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof o[1]&&o[1].length>0&&o[1].toLowerCase()!==n.location.protocol?!0:"string"==typeof o[2]&&o[2].length>0&&o[2].replace(new RegExp(":("+{"http:":80,"https:":443}[n.location.protocol]+")?$"),"")!==n.location.host?!0:!1},isHash:function(t){var o=t.indexOf(n.location.pathname)>0?!0:!1,e=t.indexOf("#")>0?!0:!1;return o&&e?!0:!1},shouldLoad:function(t,n){var o=t.prop("href");return!s.isExternal(o)&&!s.isHash(o)&&!t.is(n)},htmlDoc:function(n){var o,e=t(),i=/<(\/?)(html|head|body|title|base|meta)(\s+[^>]*)?>/gi,a="ss"+Math.round(1e5*Math.random()),s=n.replace(i,function(n,o,i,s){var r={};return o||(t.merge(e,t("<"+i+"/>")),s&&t.each(t("<div"+s+"/>")[0].attributes,function(t,n){r[n.name]=n.value}),e.eq(-1).attr(r)),"<"+o+"div"+(o?"":" id='"+a+(e.length-1)+"'")+">"});return e.length?(o||(o=t("<div/>")),o.html(s),t.each(e,function(t){var n=o.find("#"+a+t).before(e[t]);e.eq(t).html(n.contents()),n.remove()}),o.children().unwrap()):t(n)},clearIfOverCapacity:function(t,n){return Object.keys||(Object.keys=function(t){var n,o=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.push(n);return o}),Object.keys(t).length>n&&(t={}),t},getContentById:function(n,o){o=o instanceof jQuery?o:s.htmlDoc(o);var e=o.find(n),i=e.length?t.trim(e.html()):o.filter(n).html(),a=i.length?t(i):null;return a},storePageIn:function(t,n,o){return o=o instanceof jQuery?o:s.htmlDoc(o),t[n]={status:"loaded",title:o.find("title").text(),html:o},t},triggerAllAnimationEndEvent:function(n,o){o=" "+o||"";var e=0,i="animationstart webkitAnimationStart oanimationstart MSAnimationStart",a="animationend webkitAnimationEnd oanimationend MSAnimationEnd",r="allanimationend",c=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e++)},l=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e--,0===e&&n.trigger(r))};n.on(i,c),n.on(a,l),n.on("allanimationend"+o,function(){e=0,s.redraw(n)})},redraw:function(t){t.height()}},r=function(o){if(null!==o.state){var e=n.location.href,i=t("#"+o.state.id),a=i.data("smoothState");a.href===e||s.isHash(e)||a.load(e,!0)}},c=function(e,a){var r=t(e),c={},l=n.location.href,u=function(t,o){o=o||!1;var e=!1,i=!1,s={loaded:function(){var a=e?"ss.onProgressEnd":"ss.onStartEnd";i&&e?i&&d(t):r.one(a,function(){d(t)}),o||n.history.pushState({id:r.prop("id")},c[t].title,t)},fetching:function(){e||(e=!0,r.one("ss.onStartEnd",function(){a.onProgress.render(t,r,null),setTimeout(function(){r.trigger("ss.onProgressEnd"),i=!0},a.onStart.duration)})),setTimeout(function(){c.hasOwnProperty(t)&&s[c[t].status]()},10)},error:function(){n.location=t}};c.hasOwnProperty(t)||f(t),a.onStart.render(t,r,null),setTimeout(function(){r.trigger("ss.onStartEnd")},a.onStart.duration),s[c[t].status]()},d=function(t){var e="#"+r.prop("id"),l=c[t]?s.getContentById(e,c[t].html):null;l?(o.title=c[t].title,r.data("smoothState").href=t,a.onEnd.render(t,r,l),r.one("ss.onEndEnd",function(){a.callback(t,r,l)}),setTimeout(function(){r.trigger("ss.onEndEnd")},a.onEnd.duration)):!l&&a.development&&i?i.warn("No element with an id of "+e+" in response from "+t+" in "+c):n.location=t},f=function(n){if(!c.hasOwnProperty(n)){c=s.clearIfOverCapacity(c,a.pageCacheSize),c[n]={status:"fetching"};var o=a.alterRequestUrl(n)||n,e=t.ajax(o);e.success(function(t){s.storePageIn(c,n,t),r.data("smoothState").cache=c}),e.error(function(){c[n].status="error"})}},h=function(n){var o=t(n.currentTarget),e=o.prop("href");s.shouldLoad(o,a.blacklist)&&(n.stopPropagation(),f(e))},p=function(n){var o=t(n.currentTarget),e=o.prop("href");n.metaKey||n.ctrlKey||!s.shouldLoad(o,a.blacklist)||(n.stopPropagation(),n.preventDefault(),u(e))},m=function(t){t.on("click",a.anchors,p),a.prefetch&&t.on("mouseover touchstart",a.anchors,h)},g=function(t){var n=r.addClass(t).prop("class");r.removeClass(n),setTimeout(function(){r.addClass(n)},0),r.one("ss.onStartEnd ss.onProgressEnd ss.onEndEnd",function(){r.removeClass(t)})};return a=t.extend({},t.fn.smoothState.options,a),null===n.history.state&&n.history.replaceState({id:r.prop("id")},o.title,l),s.storePageIn(c,l,o.documentElement.outerHTML),s.triggerAllAnimationEndEvent(r,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),m(r),{href:l,cache:c,load:u,fetch:f,toggleAnimationClass:g}},l=function(n){return this.each(function(){this.id&&!t.data(this,"smoothState")?t.data(this,"smoothState",new c(this,n)):!this.id&&i&&i.warn("Every smoothState container needs an id but the following one does not have one:",this)})};n.onpopstate=r,t.smoothStateUtility=s,t.fn.smoothState=l,t.fn.smoothState.options=a}}(jQuery,window,document),function(){var t,n;t=this.jQuery||window.jQuery,n=t(window),t.fn.stick_in_parent=function(o){var e,i,a,s,r,c,l,u,d,f,h;for(null==o&&(o={}),u=o.sticky_class,a=o.inner_scrolling,l=o.recalc_every,c=o.parent,r=o.offset_top,s=o.spacer,i=o.bottoming,null==r&&(r=0),null==c&&(c=void 0),null==a&&(a=!0),null==u&&(u="is_stuck"),null==i&&(i=!0),d=function(o,e,d,f,h,p,m,g){var v,y,b,k,w,S,E,_,C,T,x;if(!o.data("sticky_kit")){if(o.data("sticky_kit",!0),S=o.parent(),null!=c&&(S=S.closest(c)),!S.length)throw"failed to find stick parent";if(b=!1,v=!1,T=null!=s?s&&o.closest(s):t("<div />"),T&&T.css("position",o.css("position")),E=function(){var t,n,i;if(!g)return t=parseInt(S.css("border-top-width"),10),n=parseInt(S.css("padding-top"),10),e=parseInt(S.css("padding-bottom"),10),d=S.offset().top+t+n,f=S.height(),b&&(b=!1,v=!1,null==s&&(o.insertAfter(T),T.detach()),o.css({position:"",top:"",width:"",bottom:""}).removeClass(u),i=!0),h=o.offset().top-parseInt(o.css("margin-top"),10)-r,p=o.outerHeight(!0),m=o.css("float"),T&&T.css({width:o.outerWidth(!0),height:p,display:o.css("display"),"vertical-align":o.css("vertical-align"),"float":m}),i?x():void 0},E(),p!==f)return k=void 0,w=r,C=l,x=function(){var t,c,y,_,x;if(!g)return null!=C&&(C-=1,0>=C&&(C=l,E())),y=n.scrollTop(),null!=k&&(c=y-k),k=y,b?(i&&(_=y+p+w>f+d,v&&!_&&(v=!1,o.css({position:"fixed",bottom:"",top:w}).trigger("sticky_kit:unbottom"))),h>y&&(b=!1,w=r,null==s&&(("left"===m||"right"===m)&&o.insertAfter(T),T.detach()),t={position:"",width:"",top:""},o.css(t).removeClass(u).trigger("sticky_kit:unstick")),a&&(x=n.height(),p+r>x&&(v||(w-=c,w=Math.max(x-p,w),w=Math.min(r,w),b&&o.css({top:w+"px"}))))):y>h&&(b=!0,t={position:"fixed",top:w},t.width="border-box"===o.css("box-sizing")?o.outerWidth()+"px":o.width()+"px",o.css(t).addClass(u),null==s&&(o.after(T),("left"===m||"right"===m)&&T.append(o)),o.trigger("sticky_kit:stick")),b&&i&&(null==_&&(_=y+p+w>f+d),!v&&_)?(v=!0,"static"===S.css("position")&&S.css({position:"relative"}),o.css({position:"absolute",bottom:e,top:"auto"}).trigger("sticky_kit:bottom")):void 0},_=function(){return E(),x()},y=function(){return g=!0,n.off("touchmove",x),n.off("scroll",x),n.off("resize",_),t(document.body).off("sticky_kit:recalc",_),o.off("sticky_kit:detach",y),o.removeData("sticky_kit"),o.css({position:"",bottom:"",top:"",width:""}),S.position("position",""),b?(null==s&&(("left"===m||"right"===m)&&o.insertAfter(T),T.remove()),o.removeClass(u)):void 0},n.on("touchmove",x),n.on("scroll",x),n.on("resize",_),t(document.body).on("sticky_kit:recalc",_),o.on("sticky_kit:detach",y),setTimeout(x,0)}},f=0,h=this.length;h>f;f++)e=this[f],d(t(e));return this}}.call(this),function(t){"use strict";t(document).ready(function(){location.hash&&setTimeout(function(){window.scrollTo(0,0)},1),active_nav(t("#nav")),active_subpage(t(".subpage"));var n=t("html, body"),o=t("#main").smoothState({blacklist:".logo",prefetch:!0,onStart:{duration:250,render:function(){o.toggleAnimationClass("is-exiting"),n.animate({scrollTop:0})}},callback:function(){active_nav(t("#nav")),active_subpage(t(".subpage"))}}).data("smoothState")}),t(window).load(function(){})}(jQuery);
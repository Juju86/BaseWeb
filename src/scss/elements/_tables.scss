////////////////////////////////////////////////////////////////////////////////
// @Table Variables
////////////////////////////////////////////////////////////////////////////////

// Table Map
// Define all the settings for table mixins and classes.
$table: (
  'modifier-classes' : true,
  'base' : false,
  'valign' : top,
  'nth' : odd,
  'stripe' : horizontal,
  'padding' : 10px,
  'padding-condensed' : 5px,
  'padding-expanded' : 15px,
  'background' : none,
  'background-stripe' : rgba($black, 0.05),
  'background-hover' : $yellow-pale,
  'border' : 1px solid rgba($black, 0.1),
  'border-radius' : $border-radius,
) !default;

////////////////////////////////////////////////////////////////////////////////
// @Table Mixins
////////////////////////////////////////////////////////////////////////////////

// Make Table Base
// Creates the base styles for a table modifer mixin or class. Usually applied directly through a mixin or `%table-base` placeholder.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-base($options: ()) {
  $o: map-merge( $table, $options);
  border-collapse: separate;
  background: map-get($o, 'background');
  td, th {
    padding: map-get($o, 'padding');
  }
}

// Make Table Rowed
// Adds borders to a table that divide table rows.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-rowed($options: ()) {
  $o: map-merge($table, $options);
  @if (map-get($o, 'base') == true) {
    @include make-table-base($o);
  }
  td, th {
    border-bottom: map-get($o, 'border');
  }
  thead:first-child,
  tfoot:first-child,
  tbody:first-child {
    tr:first-child {
      td, th {
        border-top: map-get($o, 'border');
      }
    }
  }
}

// Make Table Columned
// Adds borders to a table that divide table columns.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-columned($options: ()) {
  $o: map-merge($table, $options);
  @if (map-get($o, 'base') == true) {
    @include make-table-base($o);
  }
  td, th {
    border-right: map-get($o, 'border');
  }
  tr {
    td:first-child, th:first-child { 
      border-left: map-get($o, 'border');
    }
  }
}

// Make Table Bordered
// Adds borders to a table that divide table cells.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-bordered($options: ()) {
  $o: map-merge($table, $options);
  @include make-table-rowed($o);
  @include make-table-columned($o);
}

// Make Table Condensed
// Gives a table a smaller cell padding than normal.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-condensed($options: ()) {
  $o: map-merge($table, $options);
  td, th {
    padding: map-get($o, 'padding-condensed');
  }
}

// Make Table Expanded
// Gives a table a larger cell padding than normal.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-expanded($options: ()) {
  $o: map-merge($table, $options);
  td, th {
    padding: map-get($o, 'padding-expanded');
  }
}

// Give Table Rounded
// Gives a table rounded borders depending on parameters passed.
// @param $radius
//   @type unit (pixel, percent)
//   @default default ($table('border-radius'))
// @param $options
//   @type map
//   @default $table map
@mixin give-table-rounded($radius: default, $options: ()) {
  $o: map-merge($table, $options);
  @if ($radius != default) {
    $o: map-merge($o, ('border-radius': $radius));
  }
  @include border-radius(map-get($o, 'border-radius'));
  thead:first-child,
  tfoot:first-child,
  tbody:first-child {
    tr:first-child {
      td:first-child, th:first-child {
        @include border-radius-top-left(map-get($o, 'border-radius'));
      }
      td:last-child, th:last-child {
        @include border-radius-top-right(map-get($o, 'border-radius'));
      }
    }
  }
  thead:last-child,
  tfoot:last-child,
  tbody:last-child {
    tr:last-child {
      td:first-child, th:first-child {
        @include border-radius-bottom-left(map-get($o, 'border-radius'));
      }
      td:last-child, th:last-child {
        @include border-radius-bottom-right(map-get($o, 'border-radius'));
      }
    }
  }
}

// Give Table Stripes
// Gives a table stripes either vertical or horizontal depending on parameters passed.
// @param $nth
//   @type nth (odd, even)
//   @default default ($table('nth'))
// @param $dir
//   @type orientation of stripes (vertical, horizontal)
//   @default default ($table('stripe'))
// @param $options
//   @type map
//   @default $table map
@mixin give-table-stripes($nth: default, $dir: default, $options: ()) {
  $o: map-merge($table, $options);
  @if ($nth != default) {
    $o: map-merge($o, ('nth': $nth));
  }
  @if ($dir != default) {
    $o: map-merge($o, ('stripe': $dir));
  }
  @if (map-get($o, 'stripe') == vertical) {
    tr {
      td:nth-of-type(#{map-get($o, 'nth')}),
      th:nth-of-type(#{map-get($o, 'nth')}) {
        background-color: map-get($o, 'background-stripe');
      }
    }
  } @else {
    tbody tr:nth-of-type(#{map-get($o, 'nth')}) {
      td, th {
        background-color: map-get($o, 'background-stripe');
      }
    }
  }
}

// Give Table Hover
// Gives table hover styles for rows.
// @param $bg-hover
//   @type color
//   @default default ($table('background-hover'))
// @param $options
//   @type map
//   @default $table map
@mixin give-table-hover($bg-hover: default, $options: ()) {
  $o: map-merge($table, $options);
  @if ($bg-hover != default) {
    $o: map-merge($o, ('background-hover': $bg-hover));
  }
  tbody tr td {
    @include transition(background-color 0.25s linear);
  }
  tbody tr:hover td {
    background-color: map-get($o, 'background-hover');
  }
}

// Make Table Responsive
// When added to a wrapping element of a table, will make the table responsive for tablets and below.
// @param $options
//   @type map
//   @default $table map
@mixin make-table-responsive($options: ()) {
  $o: map-merge($table, $options);
  margin: 10px 0;
  table {
    margin: 0;
  }
  @include media-max('tablet') {
    overflow: auto;
    border: map-get($o, 'border');
    table td,
    table th {
      white-space: nowrap;
    }
  }
}

/*==============================================================================
  @Tables
==============================================================================*/

table {
  border-collapse: collapse;
  border-spacing: 0;
  width: 100%; 
  max-width: 100%;
  margin: 20px 0;
  overflow: auto;
  
  tr {
    vertical-align: map-get($table, 'valign');
  }
  th {
    color: $color-header;
    font-weight: bold;
  }
}

// Check if we should output modifier classes
@if (map-get($table, 'modifier-classes') == true) {

/*==============================================================================
  @Table Modifiers
==============================================================================*/

/**
 * Table Alignment Modifiers
 */
table {
  &.table-valign-baseline {
    tr {
      vertical-align: baseline;
    }
  }
  &.table-valign-top {
    tr {
      vertical-align: top;
    }
  }
  &.table-valign-middle {
    tr {
      vertical-align: middle;
    }
  }
  &.table-valign-bottom {
    tr {
      vertical-align: bottom;
    }
  }
  &.table-align-left {
    tr td, tr th {
      text-align: left;
    }
  }
  &.table-align-center {
    tr td, tr th {
      text-align: center;
    }
  }
  &.table-align-right {
    tr td, tr th {
      text-align: right;
    }
  }
}

/**
 * Base Modifiers Styles
 */
%table-base {
  @include make-table-base();
}

/**
 * Border Variations
 */
.table-rowed {
  @extend %table-base;
  @include make-table-rowed();
}
.table-columned {
  @extend %table-base;
  @include make-table-columned();
}
.table-bordered {
  @extend %table-base;
  @include make-table-bordered();
}

/**
 * Padding Variations
 */
.table-condensed {
  @include make-table-condensed();
}
.table-expanded {
  @include make-table-expanded();
}

/**
 * Miscellaneous Modifiers
 */
.table-rounded {
  @include give-table-rounded();
}
.table-striped {
  @include give-table-stripes();
}
.table-striped-horizontal {
  @include give-table-stripes(default, horizontal);
}
.table-striped-vertical {
  @include give-table-stripes(default, vertical);
}
.table-hover {
  @include give-table-hover();
}

/**
 * Responsive Tables
 */
.table-responsive {
  @include make-table-responsive();
}

} // endif
